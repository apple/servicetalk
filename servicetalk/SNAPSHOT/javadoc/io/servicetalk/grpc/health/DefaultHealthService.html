<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (17) -->
<title>DefaultHealthService</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="declaration: package: io.servicetalk.grpc.health, class: DefaultHealthService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html#class">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">io.servicetalk.grpc.health</a></div>
<h1 title="Class DefaultHealthService" class="title">Class DefaultHealthService</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">io.servicetalk.grpc.health.DefaultHealthService</div>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Implemented Interfaces:</dt>
<dd><code><a href="../../concurrent/api/AsyncCloseable.html" title="interface in io.servicetalk.concurrent.api">AsyncCloseable</a></code>, <code><a href="../api/GrpcBindableService.html" title="interface in io.servicetalk.grpc.api">GrpcBindableService</a>&lt;<a href="../../health/v1/Health.HealthService.html" title="interface in io.servicetalk.health.v1">Health.HealthService</a>&gt;</code>, <code><a href="../api/GrpcService.html" title="interface in io.servicetalk.grpc.api">GrpcService</a></code>, <code><a href="../../health/v1/Health.CheckRpc.html" title="interface in io.servicetalk.health.v1">Health.CheckRpc</a></code>, <code><a href="../../health/v1/Health.HealthService.html" title="interface in io.servicetalk.health.v1">Health.HealthService</a></code>, <code><a href="../../health/v1/Health.WatchRpc.html" title="interface in io.servicetalk.health.v1">Health.WatchRpc</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public final class </span><span class="element-name type-name-label">DefaultHealthService</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a>
implements <a href="../../health/v1/Health.HealthService.html" title="interface in io.servicetalk.health.v1">Health.HealthService</a></span></div>
<div class="block">Implementation of <a href="../../health/v1/Health.HealthService.html" title="interface in io.servicetalk.health.v1"><code>Health.HealthService</code></a> which targets
 <a href="https://github.com/grpc/grpc/blob/master/doc/health-checking.md">gRPC health checking</a> that provides
 accessors to set/clear status for arbitrary services.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color"><code><a href="#OVERALL_SERVICE_NAME" class="member-name-link">OVERALL_SERVICE_NAME</a></code></div>
<div class="col-last even-row-color">
<div class="block">The name of the service corresponding to
 the <a href="https://github.com/grpc/grpc/blob/master/doc/health-checking.md">overall health status</a>.</div>
</div>
</div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.servicetalk.health.v1.Health.CheckRpc">Fields inherited from interface&nbsp;io.servicetalk.health.v1.<a href="../../health/v1/Health.CheckRpc.html" title="interface in io.servicetalk.health.v1">Health.CheckRpc</a></h3>
<code><a href="../../health/v1/Health.CheckRpc.html#PATH">PATH</a></code></div>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-io.servicetalk.health.v1.Health.WatchRpc">Fields inherited from interface&nbsp;io.servicetalk.health.v1.<a href="../../health/v1/Health.WatchRpc.html" title="interface in io.servicetalk.health.v1">Health.WatchRpc</a></h3>
<code><a href="../../health/v1/Health.WatchRpc.html#PATH">PATH</a></code></div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">DefaultHealthService</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Create a new instance.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(java.util.function.Predicate)" class="member-name-link">DefaultHealthService</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;watchAllowed)</code></div>
<div class="col-last odd-row-color">
<div class="block">Create a new instance.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../concurrent/api/Single.html" title="class in io.servicetalk.concurrent.api">Single</a>&lt;<a href="../../health/v1/HealthCheckResponse.html" title="class in io.servicetalk.health.v1">HealthCheckResponse</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#check(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)" class="member-name-link">check</a><wbr>(<a href="../api/GrpcServiceContext.html" title="interface in io.servicetalk.grpc.api">GrpcServiceContext</a>&nbsp;ctx,
 <a href="../../health/v1/HealthCheckRequest.html" title="class in io.servicetalk.health.v1">HealthCheckRequest</a>&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
  If the requested service is unknown, the call will fail with status
  NOT_FOUND.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#clearStatus(java.lang.String)" class="member-name-link">clearStatus</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;service)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Clears the health status record of a service.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#setStatus(java.lang.String,io.servicetalk.health.v1.HealthCheckResponse.ServingStatus)" class="member-name-link">setStatus</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;service,
 <a href="../../health/v1/HealthCheckResponse.ServingStatus.html" title="enum class in io.servicetalk.health.v1">HealthCheckResponse.ServingStatus</a>&nbsp;status)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates the status of the server.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#terminate()" class="member-name-link">terminate</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">All services will be marked as <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#NOT_SERVING"><code>HealthCheckResponse.ServingStatus.NOT_SERVING</code></a>, and
 future updates to services will be prohibited.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../concurrent/api/Publisher.html" title="class in io.servicetalk.concurrent.api">Publisher</a>&lt;<a href="../../health/v1/HealthCheckResponse.html" title="class in io.servicetalk.health.v1">HealthCheckResponse</a>&gt;</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#watch(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)" class="member-name-link">watch</a><wbr>(<a href="../api/GrpcServiceContext.html" title="interface in io.servicetalk.grpc.api">GrpcServiceContext</a>&nbsp;ctx,
 <a href="../../health/v1/HealthCheckRequest.html" title="class in io.servicetalk.health.v1">HealthCheckRequest</a>&nbsp;request)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">
  Performs a watch for the serving status of the requested service.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.servicetalk.concurrent.api.AsyncCloseable">Methods inherited from interface&nbsp;io.servicetalk.concurrent.api.<a href="../../concurrent/api/AsyncCloseable.html" title="interface in io.servicetalk.concurrent.api">AsyncCloseable</a></h3>
<code><a href="../../concurrent/api/AsyncCloseable.html#closeAsyncGracefully()">closeAsyncGracefully</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.servicetalk.grpc.api.GrpcService">Methods inherited from interface&nbsp;io.servicetalk.grpc.api.<a href="../api/GrpcService.html" title="interface in io.servicetalk.grpc.api">GrpcService</a></h3>
<code><a href="../api/GrpcService.html#closeAsync()">closeAsync</a></code></div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-io.servicetalk.health.v1.Health.HealthService">Methods inherited from interface&nbsp;io.servicetalk.health.v1.<a href="../../health/v1/Health.HealthService.html" title="interface in io.servicetalk.health.v1">Health.HealthService</a></h3>
<code><a href="../../health/v1/Health.HealthService.html#bindService()">bindService</a>, <a href="../../health/v1/Health.HealthService.html#methodDescriptors()">methodDescriptors</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="OVERALL_SERVICE_NAME">
<h3>OVERALL_SERVICE_NAME</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">OVERALL_SERVICE_NAME</span></div>
<div class="block">The name of the service corresponding to
 the <a href="https://github.com/grpc/grpc/blob/master/doc/health-checking.md">overall health status</a>.</div>
<dl class="notes">
<dt>See Also:</dt>
<dd>
<ul class="see-list">
<li><a href="../../../../constant-values.html#io.servicetalk.grpc.health.DefaultHealthService.OVERALL_SERVICE_NAME">Constant Field Values</a></li>
</ul>
</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>DefaultHealthService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DefaultHealthService</span>()</div>
<div class="block">Create a new instance. Service <a href="#OVERALL_SERVICE_NAME"><code>OVERALL_SERVICE_NAME</code></a> state is set to <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#SERVING"><code>HealthCheckResponse.ServingStatus.SERVING</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(java.util.function.Predicate)">
<h3>DefaultHealthService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">DefaultHealthService</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link">Predicate</a>&lt;<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&gt;&nbsp;watchAllowed)</span></div>
<div class="block">Create a new instance. Service <a href="#OVERALL_SERVICE_NAME"><code>OVERALL_SERVICE_NAME</code></a> state is set to <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#SERVING"><code>HealthCheckResponse.ServingStatus.SERVING</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>watchAllowed</code> - <a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/Predicate.html" title="class or interface in java.util.function" class="external-link"><code>Predicate</code></a> that determines if a <a href="#watch(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)"><code>watch(GrpcServiceContext, HealthCheckRequest)</code></a>
 request that doesn't match an existing service will succeed or fail with
 <a href="../api/GrpcStatusCode.html#FAILED_PRECONDITION"><code>GrpcStatusCode.FAILED_PRECONDITION</code></a>. This can be used to bound memory by restricting watches to expected
 service names.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="check(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">
<h3>check</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../concurrent/api/Single.html" title="class in io.servicetalk.concurrent.api">Single</a>&lt;<a href="../../health/v1/HealthCheckResponse.html" title="class in io.servicetalk.health.v1">HealthCheckResponse</a>&gt;</span>&nbsp;<span class="element-name">check</span><wbr><span class="parameters">(<a href="../api/GrpcServiceContext.html" title="interface in io.servicetalk.grpc.api">GrpcServiceContext</a>&nbsp;ctx,
 <a href="../../health/v1/HealthCheckRequest.html" title="class in io.servicetalk.health.v1">HealthCheckRequest</a>&nbsp;request)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../health/v1/Health.CheckRpc.html#check(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">Health.CheckRpc</a></code></span></div>
<div class="block"><pre>
  If the requested service is unknown, the call will fail with status
  NOT_FOUND.
 </pre></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../health/v1/Health.CheckRpc.html#check(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">check</a></code>&nbsp;in interface&nbsp;<code><a href="../../health/v1/Health.CheckRpc.html" title="interface in io.servicetalk.health.v1">Health.CheckRpc</a></code></dd>
<dt>Parameters:</dt>
<dd><code>ctx</code> - context associated with this service and request.</dd>
<dd><code>request</code> - the request from the client.</dd>
<dt>Returns:</dt>
<dd>a <a href="../../concurrent/api/Single.html" title="class in io.servicetalk.concurrent.api"><code>Single</code></a> which sends the response to the client when it terminates.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="watch(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">
<h3>watch</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../concurrent/api/Publisher.html" title="class in io.servicetalk.concurrent.api">Publisher</a>&lt;<a href="../../health/v1/HealthCheckResponse.html" title="class in io.servicetalk.health.v1">HealthCheckResponse</a>&gt;</span>&nbsp;<span class="element-name">watch</span><wbr><span class="parameters">(<a href="../api/GrpcServiceContext.html" title="interface in io.servicetalk.grpc.api">GrpcServiceContext</a>&nbsp;ctx,
 <a href="../../health/v1/HealthCheckRequest.html" title="class in io.servicetalk.health.v1">HealthCheckRequest</a>&nbsp;request)</span></div>
<div class="block"><span class="descfrm-type-label">Description copied from interface:&nbsp;<code><a href="../../health/v1/Health.WatchRpc.html#watch(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">Health.WatchRpc</a></code></span></div>
<div class="block"><pre>
  Performs a watch for the serving status of the requested service.
  The server will immediately send back a message indicating the current
  serving status.  It will then subsequently send a new message whenever
  the service's serving status changes.

  If the requested service is unknown when the call is received, the
  server will send a message setting the serving status to
  SERVICE_UNKNOWN but will *not* terminate the call.  If at some
  future point, the serving status of the service becomes known, the
  server will send a new message with the service's serving status.

  If the call terminates with status UNIMPLEMENTED, then clients
  should assume this method is not supported and should not retry the
  call.  If the call terminates with any other status (including OK),
  clients should retry the call with appropriate exponential backoff.
 </pre></div>
<dl class="notes">
<dt>Specified by:</dt>
<dd><code><a href="../../health/v1/Health.WatchRpc.html#watch(io.servicetalk.grpc.api.GrpcServiceContext,io.servicetalk.health.v1.HealthCheckRequest)">watch</a></code>&nbsp;in interface&nbsp;<code><a href="../../health/v1/Health.WatchRpc.html" title="interface in io.servicetalk.health.v1">Health.WatchRpc</a></code></dd>
<dt>Parameters:</dt>
<dd><code>ctx</code> - context associated with this service and request.</dd>
<dd><code>request</code> - the request from the client.</dd>
<dt>Returns:</dt>
<dd>used to write a stream of type <a href="../../health/v1/HealthCheckResponse.html" title="class in io.servicetalk.health.v1"><code>HealthCheckResponse</code></a> to the client.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="setStatus(java.lang.String,io.servicetalk.health.v1.HealthCheckResponse.ServingStatus)">
<h3>setStatus</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">setStatus</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;service,
 <a href="../../health/v1/HealthCheckResponse.ServingStatus.html" title="enum class in io.servicetalk.health.v1">HealthCheckResponse.ServingStatus</a>&nbsp;status)</span></div>
<div class="block">Updates the status of the server.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>service</code> - the name of some aspect of the server that is associated with a health status.
 This name can have no relation with the gRPC services that the server is running with.
 It can also be an empty String <code>""</code> per the gRPC specification.</dd>
<dd><code>status</code> - is one of the values <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#SERVING"><code>HealthCheckResponse.ServingStatus.SERVING</code></a>, <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#NOT_SERVING"><code>HealthCheckResponse.ServingStatus.NOT_SERVING</code></a>,
 and <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#UNKNOWN"><code>HealthCheckResponse.ServingStatus.UNKNOWN</code></a>.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if this change was applied. <code>false</code> if it was not due to <a href="#terminate()"><code>terminate()</code></a>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clearStatus(java.lang.String)">
<h3>clearStatus</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">clearStatus</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;service)</span></div>
<div class="block">Clears the health status record of a service. The health service will respond with NOT_FOUND
 error on checking the status of a cleared service.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>service</code> - the name of some aspect of the server that is associated with a health status.
 This name can have no relation with the gRPC services that the server is running with.
 It can also be an empty String <code>""</code> per the gRPC specification.</dd>
<dt>Returns:</dt>
<dd><code>true</code> if this call removed a service. <code>false</code> if service wasn't found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="terminate()">
<h3>terminate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">terminate</span>()</div>
<div class="block">All services will be marked as <a href="../../health/v1/HealthCheckResponse.ServingStatus.html#NOT_SERVING"><code>HealthCheckResponse.ServingStatus.NOT_SERVING</code></a>, and
 future updates to services will be prohibited. This method is meant to be called prior to server shutdown as a
 way to indicate that clients should redirect their traffic elsewhere.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>true</code> if this call terminated this service. <code>false</code> if it was not due to previous call to
 this method.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
